<html>

<head>
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/intro.js/introjs.css">
</head>

<body>
    <script src="https://unpkg.com/intro.js/intro.js"></script>
</body>

</html>
<span class="pageHeading">{{pageHeader}}</span>
<div class="row adjust body-content-padding" data-title="DB Assessment"
    data-intro="This page shows a list of schemas for which discovery or assessment is in progress or complete. You can initiate discovery, assessment, and schema conversion actions from this page. You must assign a worker node, manually or automatically by clicking the 'Assign Worker Node' button, to a schema before initiating any actions."
    *ngIf="showButtons">
    <div class="col-md-12 marginBottom10 paddingTop10 paddingBottom10">
        <div class="row">
            <div class="col-md-3 row" data-title="Search Schema" data-intro="Click this button to filter the page content based on the entered search text.">
                <input type="text" id="searchTable"
                    class="marginLeft15  searchFilter form-control col-md-6"
                    placeholder="Search" #searchInput (keyup.enter)="search(searchInput.value)">
                <input *ngIf="searchInput && searchInput.value != ''" type="reset" value=" X "
                    style="height: 31.33px; margin-left: -29px; z-index: 1;" (click)="clearSearch(searchInput)">
                <button type="button" style="vertical-align:text-top;height: 32px;" (click)="search(searchInput.value)"
                        class="btn btn-md btn-simple pointerCursor marginLeft10 ">
                    Search
                </button>
            </div>
            <div class="col-md-9">
                <!-- <div class="dropdown pull-right">
                    <button class="btn btn-md btn-primary marginRight10 dropdown-toggle" type="button" id="drpdownCreatedBy" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="true"  >
                            Action
                            <i class="fa fa-chevron-down marginLeft5"></i>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="drpdownDownloadAs" style = "min-width: 235px;">
                        <li  class="dropdown-item"  (click) = "backupDMAP()" style = "cursor: pointer;">
                            <span>Backup DMAP</span>
                        </li>
                        <li  class="dropdown-item" (click) = "restoreDMAP()" style = "cursor: pointer;">
                            <span>Restore DMAP</span>
                        </li>
                    </ul>
                </div>  -->
                <!--<button type = "button" class = "btn btn-md btn-primary marginRight10 marginBottom5  pull-right float-right" (click) = "backupDMAP()">Backup DMAP</button> -->


                <button type="button" data-title="Assign Worker Node"
                    data-intro="Assign a worker node to the schema before you begin the discovery or assessment process. To manually assign worker nodes, choose the worker node for each schema and click the 'Assign Worker Node' button. Alternatively, worker nodes can be assigned automatically if no specific worker node is selected for the schema by clicking the 'Assign Worker Node' button."
                    *ngIf="showButtons  && nodeType == 'analytics_master'"
                    class="btn btn-md btn-primary pull-right marginBottom5 ng-tns-c15-2 ng-star-inserted"
                    [disabled]="disableAssignWorkerNode" (click)="assignWorkerNode()">Assign Worker Node</button>

                <button data-title="Reset Filters" data-intro="Click on this button to clear the search filters."
                    type="button" *ngIf="showButtons"
                    class="btn btn-md btn-primary marginRight5 marginBottom5 float-right" (click)="resetFilters()">Reset
                    Filters</button>
                <button type="button" *ngIf="showButtons && nodeType != 'analytics_worker'"
                    class="btn btn-md btn-primary marginRight5 pull-right marginBottom5"
                    (click)="multipleDelete()">Delete Schemas</button>
                <!-- <button type = "button"  *ngIf = "showButtons" class = "btn btn-md btn-primary marginRight10 pull-right marginBottom5" (click) = "viewDataseDetail(true)">View Detail</button> -->
                <div>
                    <button type="button" data-title="Reports"
                        data-intro="Use this menu option to download the Schema Discovery and Schema Assessment reports in PDF or excel format."
                        *ngIf="showButtons && nodeType != 'analytics_worker'"
                        [disabled]="schemaStage == 'Discovery' && (schemaStatus == 'Not Started' || schemaStatus == 'In Progress' || schemaStatus == 'Error')"
                        class="btn btn-md btn-primary marginRight5 pull-right marginBottom5" id="drpdownDownloadAs"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" (click)="reports()">Reports
                        <i class="fa fa-chevron-down marginLeft5"></i>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="drpdownDownloadAs" style="min-width: 145px;">
                        <li class="dropdown-item" (click)="viewDiscoveryReport()" style="cursor: pointer;"
                            *ngIf="enableDiscoveryReport">
                            <span>Discovery</span>
                        </li>
                        <li class="dropdown-item" (click)="viewAssessmentReport()" style="cursor: pointer;"
                            *ngIf="enableAssessmentReport">
                            <span>Assessment</span>
                        </li>
                        <li class="dropdown-item" (click)="viewSchemaConversionReport()" style="cursor: pointer;"
                            *ngIf="enableSchemaConversionReport">
                            <span>Schema Conversion</span>
                        </li>
                        <li class="dropdown-item" (click)="viewDataMigrationReport()" style="cursor: pointer;"
                            *ngIf="enableDataMigrationReport">
                            <span>Data Migration</span>
                        </li>
                    </ul>
                </div>

                <div *ngIf="schemaStage == 'Data Migration'">
                    <button type="button" *ngIf="showButtons && nodeType != 'analytics_worker'"
                        class="btn btn-md btn-primary marginRight5 pull-right marginBottom5" id="drpdowndataValidation"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"
                        [disabled]="schemaStage != 'Data Migration' || (schemaStatus != 'Completed' && schemaStatus != 'Processing Done')">Validation
                        <i class="fa fa-chevron-down marginLeft5"></i>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="drpdownDownloadAs" style="min-width: 150px !important;">
                        <li class="dropdown-item" *ngIf="schemaStatus!='Error' && schemaStatus!='In Progress'"
                            (click)="reValidateData()" style="cursor: pointer;">
                            <span>Revalidate Data</span>
                        </li>
                        <li class="dropdown-item" *ngIf="schemaStatus =='Completed' || schemaStatus =='Processing Done'"
                            (click)="logicalValidation()" style="cursor: pointer;">
                            <span>Logical Data Validation</span>
                        </li>
                        <li class="dropdown-item" *ngIf="schemaStatus =='Completed'"
                            [ngClass]="{disabled:schemaStatus != 'Completed'}" (click)="performaceBench()"
                            style="cursor: pointer;">
                            <span>Functional Validation</span>
                        </li>

                        <li class="dropdown-item" (click)="generateValidationReports(radioCheckedValue)" style="cursor: pointer;">

                            <span>Generate Schema Validation Reports</span>
                        </li>
                    </ul>
                </div>

                <div *ngIf="schemaStage != 'Data Migration'">
                    <button type="button" *ngIf="showButtons && nodeType != 'analytics_worker'"
                        class="btn btn-md btn-primary marginRight5 pull-right marginBottom5" id="drpdowndataValidation"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"
                        [disabled]="schemaStage != 'Schema Conversion' || (schemaStatus != 'Completed' && schemaStatus != 'Processing Done')">Validation
                        <i class="fa fa-chevron-down marginLeft5"></i>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="drpdownDownloadAs" style="min-width: 140px !important;">
                        <li class="dropdown-item" *ngIf="schemaStatus!='Error' && schemaStatus!='In Progress'"
                            (click)="generateValidationReports(radioCheckedValue)" style="cursor: pointer;">
                            <span>Generate Validation Reports</span>
                        </li>
                        <li class="dropdown-item" *ngIf="schemaStatus!='Error'"
                            (click)="reValidateReports(radioCheckedValue)" style="cursor: pointer;">
                            <span>Revalidate Schema</span>
                        </li>
                    </ul>

                </div>

                <div>
                  <button class="btn btn-md btn-primary marginRight5 pull-right marginBottom5" *ngIf="hasValidationErrors"
                  id="validationError" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" (click)="DownloadValidationExcel()">
                  Validation Error
                </button>
                </div>

                <div>
                    <button type="button" *ngIf="showButtons && nodeType != 'analytics_worker'"
                        data-title="Data Migration"
                        data-intro="Click this button to execute a test data migration for the selected schema."
                        class="btn btn-md btn-primary marginRight5 pull-right marginBottom5" id="drpdowndataMigrationAs"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"
                        [disabled]="(schemaStage != 'Data Migration' && schemaStage != 'Schema Conversion')"
                        (click)="dataMigration(radioCheckedValue)">Data Migration
                        <i class="fa fa-chevron-down marginLeft5"></i>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="drpdowndataMigrationAs">
                        <li class="dropdown-item" [ngClass]="{disabled:schemaStatus == 'In Progress' ||
                        (schemaStage == 'Schema Conversion' && schemaStatus != 'Completed')}">
                            <span>Data Migration Complete</span>
                            <span class="pull-right">
                                <mat-slide-toggle (click)="dataMigrationConfirmation(radioCheckedValue)"
                                    [(ngModel)]="isDataMigrationChecked"></mat-slide-toggle></span>
                        </li>
                        <li class="dropdown-item" style="padding:0px;">
                            <hr>
                        </li>
                        <li class="dropdown-item"
                            [ngClass]="{disabled:(schemaStage == 'Schema Conversion' &&  schemaStatus != 'Completed') || (schemaStage == 'Data Migration' &&  schemaStatus == 'In Progress')}"
                            (click)="startDataMigration(radioCheckedValue)" style="cursor: pointer;">
                            <span>Start Data Migration</span>
                        </li>
                        <li class="dropdown-item"
                            *ngIf="schemaStage =='Data Migration' && nodeType != 'analytics_worker'"
                            [ngClass]="{disabled: schemaStatus != 'Completed'}"
                            (click)="backupRestore(radioCheckedValue)" style="cursor: pointer;">
                            <span>Backup & Restore</span>
                        </li>
                        <li class="dropdown-item" style="padding:0px;">
                            <hr>
                        </li>
                        <li class="dropdown-item" (click)="dataMigrationsSettings(radioCheckedValue,false)"
                            style="cursor: pointer;">
                            <span>Data Migration Settings</span>
                        </li>
                        <li class="dropdown-item" *ngIf="schemaStage == 'Data Migration'"
                            [ngClass]="{disabled:schemaStatus != 'Error'}" (click)="downloadLogs(radioCheckedValue)"
                            style="cursor: pointer;">
                            <span>Download Data Migration Log File</span>
                        </li>
                        <li class="dropdown-item" [ngClass]="{disabled:schemaStatus != 'Completed' || !isDumpDataFile}"
                            (click)="viewDumpFiles(radioCheckedValue)" style="cursor: pointer;">
                            <span>Download Dump Data Files</span>
                        </li>
                    </ul>
                </div>

                <button type="button" *ngIf="showButtons  && nodeType == 'analytics_master'"
                    data-title="Run Schema Conversion"
                    data-intro="Click on this button after completing the assessment of a schema to initiate the conversion process for the target database environment."
                    class="btn btn-md btn-primary marginRight5 pull-right marginBottom5 ng-tns-c15-2 ng-star-inserted"
                    [disabled]="disableSchemaConversion" (click)="runSchemaMigration()">Run Schema
                    Conversion</button>

                <button type="button" *ngIf="showButtons  && nodeType == 'analytics_master'" data-title="Discover All"
                    data-intro="Click this to start quick discovery for all the schemas."
                    class="btn btn-md btn-primary marginRight5 pull-right marginBottom5 ng-tns-c15-2 ng-star-inserted"
                    [disabled]="disableDiscoverAll" (click)="runDiscoverAll()">Discover All</button>
            </div>
        </div>
    </div>



    <div class="col-md-12 table-responsive" style="overflow: inherit;" >
        <table id="analyticsTable" class="analyticsTable table table-hover table-sm table-bordered"
            data-title="Analytics Table"
            data-intro="This table shows a list of schemas for which discovery or assessment is in progress or complete. You can select schemas and initiate various actions such as schema discovery, assessment, conversion, or delete a schema.">
            <thead>
                <tr class="analyticsReports" style="font-size: 12px;">

                    <th>
                        <div class="form-check" style="padding:0px;">
                        </div>
                    </th>

                    <th>
                        <span class="marginRight5 defaultCursor">Source Schema</span>
                        <span>
                            <i class="fa fa-chevron-down pointerCursor dropdown-toggle" id="drpdownSourceSchema"
                                data-toggle="dropdown" type="button" aria-haspopup="true" aria-expanded="true">

                            </i>

                            <ul class="dropdown-menu drpdownSourceSchema" aria-labelledby="drpdownSourceSchema"
                                style="left:-100px !important;">
                                <li class="dropdown-item" *ngFor="let source of sourceSchemas">
                                    <div>
                                        <div class="form-check" style="padding:0px;">
                                            <input type="checkbox" ngModel name="sourceSchemafilter_{{source.runId}}"
                                                [(ngModel)]="source.isSourceSchemaChecked"
                                                class="form_checkbox ng-untouched ng-pristine ng-valid"
                                                style="vertical-align: text-top;" (change)="onFilterSelected()" />
                                            <label class="form-check-label-workerNode marginLeft5"
                                                for="sourceSchemafilter_{{source.runId}}">{{source.sourceDBSchema}}</label>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </span>
                    </th>

                    <th>
                        <span class="marginRight5 defaultCursor">Source DB</span>
                        <span>
                            <i class="fa fa-chevron-down pointerCursor dropdown-toggle" id="drpdownSourceSchema"
                                data-toggle="dropdown" type="button" aria-haspopup="true" aria-expanded="true">

                            </i>

                            <ul class="dropdown-menu drpdownSourceDatabase" aria-labelledby="drpdownSourceDatabase"
                                style="left:-100px !important;">
                                <li class="dropdown-item" *ngFor="let db of sourceDbs">
                                    <div>
                                        <div class="form-check" style="padding:0px;">
                                            <input type="checkbox" ngModel name="sourceDbfilter_{{db.runId}}"
                                                [(ngModel)]="db.isSourceDbChecked"
                                                class="form_checkbox ng-untouched ng-pristine ng-valid"
                                                style="vertical-align: text-top;" (change)="onFilterSelected()" />
                                            <label class="form-check-label-workerNode marginLeft5"
                                                for="sourceDbfilter_{{db.runId}}">{{db.sourceDBName}}</label>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </span>
                    </th>

                    <th>
                        <span class="marginRight5 defaultCursor">Target DB</span>
                        <span>
                            <i class="fa fa-chevron-down pointerCursor dropdown-toggle" id="drpdownTargetDbs"
                                data-toggle="dropdown" type="button" aria-haspopup="true" aria-expanded="true">

                            </i>

                            <ul class="dropdown-menu drpdownTargetDbs" aria-labelledby="drpdownTargetDbs"
                                style="left:-100px !important;">
                                <li class="dropdown-item" *ngFor="let target of targetDbs">
                                    <div>
                                        <div class="form-check" style="padding:0px;">
                                            <input type="checkbox" ngModel name="targetfilter_{{target.runId}}"
                                                [(ngModel)]="target.isTargetDbChecked"
                                                class="form_checkbox ng-untouched ng-pristine ng-valid"
                                                style="vertical-align: text-top;" (change)="onFilterSelected()" />
                                            <label class="form-check-label-workerNode marginLeft5"
                                                for="targetfilter_{{target.runId}}">{{target.targetDBName}}</label>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </span>
                    </th>
                    <th>
                        <span class="marginRight5 defaultCursor">Business Unit</span>
                        <span>
                            <i class="fa fa-chevron-down pointerCursor dropdown-toggle" id="drpdownbUnits"
                                data-toggle="dropdown" type="button" aria-haspopup="true" aria-expanded="true">

                            </i>

                            <ul class="dropdown-menu drpdownbUnits" aria-labelledby="drpdownbUnits"
                                style="left:-100px !important;">
                                <li class="dropdown-item" *ngFor="let bunit of bUnits">
                                    <div>
                                        <div class="form-check" style="padding:0px;">
                                            <input type="checkbox" ngModel name="bunitfilter_{{bunit.runId}}"
                                                [(ngModel)]="bunit.isbUnitChecked"
                                                class="form_checkbox ng-untouched ng-pristine ng-valid"
                                                style="vertical-align: text-top;" (change)="onFilterSelected()" />
                                            <label class="form-check-label-workerNode marginLeft5"
                                                for="bunitfilter_{{bunit.runId}}">{{bunit.businessUnit}}</label>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </span>
                    </th>
                    <th>
                        <span class="marginRight5 defaultCursor">Application Name</span>
                        <span>
                            <i class="fa fa-chevron-down pointerCursor dropdown-toggle" id="drpdownappNames"
                                data-toggle="dropdown" type="button" aria-haspopup="true" aria-expanded="true">

                            </i>

                            <ul class="dropdown-menu drpdownappNames" aria-labelledby="drpdownappNames"
                                style="left:-100px !important;">
                                <li class="dropdown-item" *ngFor="let appName of appNames">
                                    <div>
                                        <div class="form-check" style="padding:0px;">
                                            <input type="checkbox" ngModel name="appNamefilter_{{appName.runId}}"
                                                [(ngModel)]="appName.isappNameChecked"
                                                class="form_checkbox ng-untouched ng-pristine ng-valid"
                                                style="vertical-align: text-top;" (change)="onFilterSelected()" />
                                            <label class="form-check-label-workerNode marginLeft5"
                                                for="appNamefilter_{{appName.runId}}">{{appName.applicationName}}</label>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </span>
                    </th>
                    <th
                        *ngIf="nodeType == 'analytics_master' && (licenseType == 'dmap enterprise' || licenseType == 'dmap pro')">
                        <span class="marginRight5 defaultCursor">Worker Node</span>
                        <span>
                            <i class="fa fa-chevron-down pointerCursor dropdown-toggle" id="drpdownAssignedVm"
                                data-toggle="dropdown" type="button" aria-haspopup="true" aria-expanded="true">

                            </i>

                            <ul class="dropdown-menu drpdownAssignedVm" aria-labelledby="drpdownAssignedVm"
                                style="left:-100px !important;">
                                <li class="dropdown-item" *ngFor="let assignedVm of assignedVms">
                                    <div>
                                        <div class="form-check" style="padding:0px;"
                                            *ngIf="assignedVm.workerNode!==null">
                                            <input type="checkbox" ngModel name="assignedVmfilter_{{assignedVm.runId}}"
                                                [(ngModel)]="assignedVm.isassignedVmChecked"
                                                class="form_checkbox ng-untouched ng-pristine ng-valid"
                                                style="vertical-align: text-top;" (change)="onFilterSelected()" />
                                            <label class="form-check-label-workerNode marginLeft5"
                                                for="assignedVmfilter_{{assignedVm.runId}}">{{assignedVm.workerNode}}</label>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </span>
                    </th>

                    <th>
                        <span class="marginRight5 pointerCursor">Run ID</span>
                        <span>
                            <i class="fa fa-chevron-down pointerCursor dropdown-toggle" id="drpdownRequestId"
                                data-toggle="dropdown" type="button" aria-haspopup="true" aria-expanded="true">

                            </i>

                            <ul class="dropdown-menu drpdownRequestId" aria-labelledby="drpdownCreatedBy"
                                style="left:-100px !important; min-width: 140px !important;">
                                <li class="dropdown-item" *ngFor="let request of requests">
                                    <div>
                                        <div class="form-check" style="padding:0px;">
                                            <input type="checkbox" ngModel name="reqfilter_{{request.runId}}"
                                                [(ngModel)]="request.isRequestorChecked"
                                                class="form_checkbox ng-untouched ng-pristine ng-valid"
                                                style="vertical-align: text-top;" (change)="onFilterSelected()" />
                                            <label class="form-check-label-workerNode marginLeft5"
                                                for="reqfilter_{{request.runId}}">{{request.runId}}</label>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </span>
                    </th>

                    <th>
                        <span class="marginRight5 pointerCursor">Stage</span>
                        <span>
                            <i class="fa fa-chevron-down pointerCursor dropdown-toggle" id="drpdownStep"
                                data-toggle="dropdown" type="button" aria-haspopup="true" aria-expanded="true">

                            </i>
                            <ul class="dropdown-menu drpdownStep" aria-labelledby="drpdownStep"
                                style="min-width: 153px !important;">

                                <li class="dropdown-item" *ngFor="let step of steps">
                                    <div>
                                        <div class="form-check" style="padding:0px;">
                                            <input type="checkbox" ngModel name="stepfilter_{{step.runId}}"
                                                [(ngModel)]="step.isStepChecked"
                                                class="form_checkbox ng-untouched ng-pristine ng-valid"
                                                style="vertical-align: text-top;" (change)="onFilterSelected()" />
                                            <label class="form-check-label-workerNode marginLeft5"
                                                for="stepfilter_{{step.runId}}">{{step.step}}</label>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </span>
                    </th>

                    <th>
                        <span class="marginRight5 pointerCursor">Status</span>
                        <span>
                            <i class="fa fa-chevron-down pointerCursor  dropdown-toggle" id="drpdownStepStatus"
                                data-toggle="dropdown" type="button" aria-haspopup="true" aria-expanded="true">

                            </i>
                            <ul class="dropdown-menu drpdownStepStatus" aria-labelledby="drpdownStepStatus"
                                style="min-width: 136px !important;">
                                <li class="dropdown-item" *ngFor="let status of stepStatuses">
                                    <div>
                                        <div class="form-check" style="padding:0px;">
                                            <input type="checkbox" ngModel name="statusfilter_{{status.runId}}"
                                                [(ngModel)]="status.isStatusChecked"
                                                class="form_checkbox ng-untouched ng-pristine ng-valid"
                                                style="vertical-align: text-top;" (change)="onFilterSelected()" />
                                            <label class="form-check-label-workerNode marginLeft5"
                                                for="statusfilter_{{status.runId}}">{{status.stepStatus}}</label>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </span>
                    </th>

                    <!-- <th>
                    <span class = "marginRight5 pointerCursor">Created By</span>
                    <span>
                        <i class="fa fa-chevron-down pointerCursor dropdown-toggle" id="drpdownCreatedBy" data-toggle="dropdown"type="button" aria-haspopup="true" aria-expanded="true" >

                        </i>
                        <ul class="dropdown-menu drpdownCreatedBy" aria-labelledby="drpdownCreatedBy">
                            <li  class="dropdown-item" *ngFor = "let creator of creators">
                                <div>
                                    <div class="form-check" style = "padding:0px;">
                                        <input type="checkbox" ngModel name = "createfilter_{{creator.runId}}" [(ngModel)] = "creator.isCreatorChecked" class="checkbox-custom" (change) = "onFilterSelected()"/>
                                        <label class="form-check-label" for="createfilter_{{creator.runId}}">{{creator.createdBy}}</label>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </span>
                </th> -->

                    <th>
                        <span class="marginRight5 pointerCursor">Last Updated</span>
                        <span>
                            <i class="fa fa-chevron-down pointerCursor dropdown-toggle" id="drpdownLastUpdated"
                                data-toggle="dropdown" type="button" aria-haspopup="true" aria-expanded="true">

                            </i>
                            <ul class="dropdown-menu drpdownLastUpdated" aria-labelledby="drpdownLastUpdated">
                                <li class="dropdown-item" *ngFor="let date of lastUpdates">
                                    <div>
                                        <div class="form-check" style="padding:0px;">
                                            <input type="checkbox" ngModel name="lastUpdatefilter_{{date.runId}}"
                                                [(ngModel)]="date.isDateChecked"
                                                class="form_checkbox ng-untouched ng-pristine ng-valid"
                                                style="vertical-align: text-top;" (change)="onFilterSelected()" />
                                            <label class="form-check-label-workerNode marginLeft5"
                                                for="lastUpdatefilter_{{date.runId}}">{{date.lastUpdated}}</label>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </span>
                    </th>

                    <th *ngIf="nodeType != 'analytics_worker'">

                    </th>
                </tr>
            </thead>
            <tbody>
                <ng-container *ngIf="showButtons && tableData.length === 0">
                    <tr>
                        <td colspan="12" style="padding-top: 5px;">
                                <p>There are no schemas present that match the applied filters. Please click the 'Reset Filters' button.</p>
                        </td>
                    </tr>
                </ng-container>
                <ng-container
                    *ngFor="let data of tableData | multiFieldFilter:searchDmapTable:false | paginate: { itemsPerPage: 20, currentPage: p };index as i">
                    <tr style="font-size: 12px;" [ngClass]="{highlightedRow: data.runId == radioCheckedValue}">
                        <td class="textCenter">
                            <div class="">

                                <input type="radio" [checked]="data.runId == radioCheckedValue" name="schema"
                                    value="checkbox_{{data.runId}}" class="form_radio textCenter" style="top: 2px;"
                                    #inputE2 (change)="onRadioClicked(data,true)">
                            </div>
                        </td>
                        <td (click)="viewDataseDetail(data,true)">{{data.sourceDBSchema}}</td>
                        <td (click)="viewDataseDetail(data,true)">{{data.sourceDBName}}</td>
                        <td (click)="viewDataseDetail(data,true)">{{data.targetDBName}}</td>
                        <td (click)="viewDataseDetail(data,true)">{{data.businessUnit}}</td>
                        <td (click)="viewDataseDetail(data,true)">{{data.applicationName}}</td>
                        <td
                            *ngIf="nodeType == 'analytics_master' && (licenseType == 'dmap enterprise' || licenseType == 'dmap pro')">
                            <span *ngIf="data.workerNode != null" (click)="viewDataseDetail(data,true)">

                                {{data.workerNode}}
                            </span>
                            <span *ngIf="data.workerNode == null">
                                <select class="form-control"
                                    style="padding: 1px 0.75rem 0px 0px !important;height:18px !important;padding-bottom:0px !important;"
                                    (change)="updateWorkerNodes({schemaDtls: data, event:$event})">
                                    <option [value]="" selected label="VM:" *ngIf="data.selectedWorkerNode ==null"
                                        disabled></option>
                                    <!-- <option [value]="" selected *ngIf ="data.selectedWorkerNode !=null">{{data.selectedWorkerNode}}</option> -->
                                    <option *ngFor="let worker of data.active_worker_nodes" [ngValue]="worker"
                                        [selected]="data.selectedWorkerNode == worker">{{ worker}}</option>
                                </select>
                            </span>
                        </td>
                        <td (click)="viewDataseDetail(data,true)">{{data.runId}}</td>
                        <td (click)="viewDataseDetail(data,true)">
                            <div>{{data.step}}</div>
                            <!-- <div [ngClass] = "{displayNone: data.stepStatus == 'Not Started' || data.stepStatus == 'Completed' || data.step == 'Data Migration'}" style = "font-size:12px; color:gray;"> -->
                            <div *ngIf="data.stepStatus != 'In Queue' && data.stepStatus != 'Not Started' && data.stepStatus != 'Completed' && data.step != 'Discovery' && data.step != 'Validation' && data.step != 'Target DB Creation'"
                                style="font-size:10px; color:gray;">
                                On step {{data.migrationStep}} of
                                <span *ngIf="data.step == 'Assessment' && data.toolsUsed!='ORA2PG'">4</span><span
                                    *ngIf=" data.step == 'Assessment' && data.toolsUsed =='ORA2PG'">5</span>
                                <span *ngIf="data.step == 'Schema Conversion' && data.target_env !='Azure'">3</span>
                                <span
                                    *ngIf="data.step == 'Schema Conversion' && data.target_env =='Azure' && data.toolsUsed=='ORA2PG'">5</span>
                                <span
                                    *ngIf=" data.step == 'Schema Conversion' && data.target_env =='Azure' && data.toolsUsed!='ORA2PG'">4</span>
                                <span *ngIf=" data.step == 'Data Migration'">2</span>
                            </div>
                        </td>
                        <td (click)="viewDataseDetail(data,true)" [ngClass]="{completedStatus: data.stepStatus === 'Completed',
                                  notStartedStatus: data.stepStatus === 'Not Started',
                                  InQueueStatus: data.stepStatus === 'In Queue',
                                  notInProgressStatus: data.stepStatus === 'In Progress',
                                  notErrorStatus: data.stepStatus === 'Error',
                                  completedInterim: data.stepStatus === 'Processing Done'}">{{data.stepStatus}}</td>
                        <!-- <td>{{data.createdBy}}</td> -->
                        <td (click)="viewDataseDetail(data,true)">{{data.lastUpdated}}</td>
                        <td *ngIf="nodeType != 'analytics_worker'" class="textCenter">
                            <!-- <i class="fa fa-pencil-square-o marginRight10 editSchema" aria-hidden="true" (click) = "updatePassword(data)" title = "Edit"></i>  -->
                            <!-- <span (click) = "updatePassword(data)" title = "Edit" class ="marginRight10">
                        <svg class="bi bi-pencil-square" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                            <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                        </svg>
                    </span> -->
                            <span (click)="updatePassword(data)" title="Edit">
                                <svg class="bi bi-gear" width="18px" height="18px" viewBox="0 0 16 16"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd"
                                        d="M8.837 1.626c-.246-.835-1.428-.835-1.674 0l-.094.319A1.873 1.873 0 0 1 4.377 3.06l-.292-.16c-.764-.415-1.6.42-1.184 1.185l.159.292a1.873 1.873 0 0 1-1.115 2.692l-.319.094c-.835.246-.835 1.428 0 1.674l.319.094a1.873 1.873 0 0 1 1.115 2.693l-.16.291c-.415.764.42 1.6 1.185 1.184l.292-.159a1.873 1.873 0 0 1 2.692 1.116l.094.318c.246.835 1.428.835 1.674 0l.094-.319a1.873 1.873 0 0 1 2.693-1.115l.291.16c.764.415 1.6-.42 1.184-1.185l-.159-.291a1.873 1.873 0 0 1 1.116-2.693l.318-.094c.835-.246.835-1.428 0-1.674l-.319-.094a1.873 1.873 0 0 1-1.115-2.692l.16-.292c.415-.764-.42-1.6-1.185-1.184l-.291.159A1.873 1.873 0 0 1 8.93 1.945l-.094-.319zm-2.633-.283c.527-1.79 3.065-1.79 3.592 0l.094.319a.873.873 0 0 0 1.255.52l.292-.16c1.64-.892 3.434.901 2.54 2.541l-.159.292a.873.873 0 0 0 .52 1.255l.319.094c1.79.527 1.79 3.065 0 3.592l-.319.094a.873.873 0 0 0-.52 1.255l.16.292c.893 1.64-.902 3.434-2.541 2.54l-.292-.159a.873.873 0 0 0-1.255.52l-.094.319c-.527 1.79-3.065 1.79-3.592 0l-.094-.319a.873.873 0 0 0-1.255-.52l-.292.16c-1.64.893-3.433-.902-2.54-2.541l.159-.292a.873.873 0 0 0-.52-1.255l-.319-.094c-1.79-.527-1.79-3.065 0-3.592l.319-.094a.873.873 0 0 0 .52-1.255l-.16-.292c-.892-1.64.902-3.433 2.541-2.54l.292.159a.873.873 0 0 0 1.255-.52l.094-.319z" />
                                    <path fill-rule="evenodd"
                                        d="M8 5.754a2.246 2.246 0 1 0 0 4.492 2.246 2.246 0 0 0 0-4.492zM4.754 8a3.246 3.246 0 1 1 6.492 0 3.246 3.246 0 0 1-6.492 0z" />
                                </svg>
                            </span>
                            <!-- <i class="fa fa-cog settingSchema" aria-hidden="true" (click) = "setMergeOptions(data)" title = "Settings"></i>     -->
                            <!-- <span (click) = "setMergeOptions(data)" title = "Settings">

                        <svg class="bi bi-gear" width="1em" height="1em" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M8.837 1.626c-.246-.835-1.428-.835-1.674 0l-.094.319A1.873 1.873 0 0 1 4.377 3.06l-.292-.16c-.764-.415-1.6.42-1.184 1.185l.159.292a1.873 1.873 0 0 1-1.115 2.692l-.319.094c-.835.246-.835 1.428 0 1.674l.319.094a1.873 1.873 0 0 1 1.115 2.693l-.16.291c-.415.764.42 1.6 1.185 1.184l.292-.159a1.873 1.873 0 0 1 2.692 1.116l.094.318c.246.835 1.428.835 1.674 0l.094-.319a1.873 1.873 0 0 1 2.693-1.115l.291.16c.764.415 1.6-.42 1.184-1.185l-.159-.291a1.873 1.873 0 0 1 1.116-2.693l.318-.094c.835-.246.835-1.428 0-1.674l-.319-.094a1.873 1.873 0 0 1-1.115-2.692l.16-.292c.415-.764-.42-1.6-1.185-1.184l-.291.159A1.873 1.873 0 0 1 8.93 1.945l-.094-.319zm-2.633-.283c.527-1.79 3.065-1.79 3.592 0l.094.319a.873.873 0 0 0 1.255.52l.292-.16c1.64-.892 3.434.901 2.54 2.541l-.159.292a.873.873 0 0 0 .52 1.255l.319.094c1.79.527 1.79 3.065 0 3.592l-.319.094a.873.873 0 0 0-.52 1.255l.16.292c.893 1.64-.902 3.434-2.541 2.54l-.292-.159a.873.873 0 0 0-1.255.52l-.094.319c-.527 1.79-3.065 1.79-3.592 0l-.094-.319a.873.873 0 0 0-1.255-.52l-.292.16c-1.64.893-3.433-.902-2.54-2.541l.159-.292a.873.873 0 0 0-.52-1.255l-.319-.094c-1.79-.527-1.79-3.065 0-3.592l.319-.094a.873.873 0 0 0 .52-1.255l-.16-.292c-.892-1.64.902-3.433 2.541-2.54l.292.159a.873.873 0 0 0 1.255-.52l.094-.319z"/>
                            <path fill-rule="evenodd" d="M8 5.754a2.246 2.246 0 1 0 0 4.492 2.246 2.246 0 0 0 0-4.492zM4.754 8a3.246 3.246 0 1 1 6.492 0 3.246 3.246 0 0 1-6.492 0z"/>
                        </svg>
                    </span>     -->
                        </td>
                    </tr>
                </ng-container>
                <ng-container *ngIf="(tableData | multiFieldFilter:searchDmapTable:false).length === 0">
                    <tr>
                      <td colspan="12" style="padding-top: 5px;">
                        <p>No schema found.</p>
                      </td>
                    </tr>
                  </ng-container>
            </tbody>

        </table>

    </div>
    <div>
        <app-start-assessment-modal>

        </app-start-assessment-modal>
    </div>
    <div class="col-md-12" *ngIf="showButtons">
        <span *ngIf="tableData.length >= 1" style="font-weight: 600;font-size: 13px;">{{totalCount}}</span>
        <pagination-controls (pageChange)="p = $event;pChange()" style="font-size: 12px;float: right;"
            directionLinks="true" autoHide="true" responsive="true" previousLabel="PREVIOUS"
            nextLabel="NEXT" screenReaderPaginationLabel="Pagination" screenReaderPageLabel="page"
            screenReaderCurrentLabel="You're on page"></pagination-controls>
    </div>
</div>
<!-- <div class="row adjust body-content-padding" *ngIf="!showButtons && !schemasNotFound">
    <span class="">Please wait while data is being fetched.</span>
</div>
<div class="row adjust body-content-padding" *ngIf="schemasNotFound">
    <span class="">No schemas found with current selection.</span>
</div> -->
